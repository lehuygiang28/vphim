@startuml Update Director Flow

' Stereotypes: <<Component>>, <<Resolver>>, <<Service>>, <<Repository>>, <<Database>>
participant "EditDirector (Next.js Admin)" as EditDirector <<Component>>
participant "DirectorResolver" as Resolver <<Resolver>>
participant "DirectorService" as Service <<Service>>
participant "DirectorRepository" as Repository <<Repository>>
database "MongoDB" as DB <<Database>>

EditDirector -> Resolver: mutation updateDirector(input)
activate Resolver
Resolver -> Service: updateDirector(input)
activate Service
Service -> Repository: findOneAndUpdateOrThrow(filterQuery, updateQuery)
activate Repository
note right of Repository
  filterQuery: { _id }
  updateQuery: { name, originalName, posterUrl }
end note
Repository -> DB: Find and update director
activate DB
alt director found
    DB --> Repository: updated director
    Repository --> Service: updated director
else director not found
    DB --> Repository: null
    Repository --> Service: Throw NotFoundException
end
deactivate DB
deactivate Repository
Service --> Resolver: updatedDirector or error
deactivate Service
Resolver --> EditDirector: updatedDirector or error
deactivate Resolver

@enduml
