@startuml Get Single Director Flow

' Stereotypes: <<Component>>, <<Resolver>>, <<Service>>, <<Repository>>, <<Database>>
participant "EditDirector (Next.js Admin)" as EditDirector <<Component>>
participant "DirectorResolver" as Resolver <<Resolver>>
participant "DirectorService" as Service <<Service>>
participant "DirectorRepository" as Repository <<Repository>>
database "MongoDB" as DB <<Database>>

EditDirector -> Resolver: query getDirector(input)
activate Resolver
Resolver -> Service: getDirector(input)
activate Service
alt _id provided
    Service -> Repository: findOneOrThrow({_id})
    activate Repository
    Repository -> DB: Find director by _id
    activate DB
    DB --> Repository: director or null
    deactivate DB
    Repository --> Service: director or exception
    deactivate Repository
else slug provided
    Service -> Repository: findOneOrThrow({slug})
    activate Repository
    Repository -> DB: Find director by slug
    activate DB
    DB --> Repository: director or null
    deactivate DB
    Repository --> Service: director or exception
    deactivate Repository
else no parameter
    Service --> Resolver: Throw HTTP 422 Exception
end
Service --> Resolver: director or error
deactivate Service
Resolver --> EditDirector: director or error
deactivate Resolver

@enduml
